<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	</meta>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Блог Стебунова Владимира</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
		<meta property="og:title" content="Знакомство с J" />	</head>

<body>
	<header>
		<h1><a href="/">Блог Стебунова Владимира</a></h1>
	</header>
	<main>
		<article>
			<time datetime=25-10-2017>25 октября 2017</time>
			<h1 id="знакомство-с-j">Знакомство с J</h1>
<p>Как найти моду в языке J? Очень просто:</p>
<pre><code>mode=: ~. #~ ( = &gt;./ )@( #/.~ )

mode 1 1 2 2 3 3 4 4 4 5 5 6 6 7 8 8 9 9 0 0 0</code></pre>
<p>Как это работает? Давайте разберёмся.</p>
<p>Для начала установим глобальную переменную вывода, чтобы мы могли видеть все предложение в форме коробок (2), дерева(4) и строки(5).</p>
<pre><code>9!:3 (2 4 5)</code></pre>
<p>Теперь выводится следующее.</p>
<p><img src="img/mode.png" /></p>
<p>Это дерево показывает, что будет происходить с нашими данными.</p>
<p>В отличие от других языков, здесь операторы, работающие с данными, принято называть глаголами. И это не блажь, а действительно необходимое разделение. Глагол применяется к данным, но есть различные операторы, которые могут его модифицировать. Если глагол применяется к одному параметру, то его называют моноидным, если к двум - диадным.</p>
<p>На картинке изображена вилка, которая применит наши данные сначала к левой части, затем к правой, и после этого проделает над ними операцию посередине.</p>
<p>Если попробовать раскрыть, то выглядеть это будет так:</p>
<pre><code>(~. y) ~# ((=&gt;./)@(#/.~) y)</code></pre>
<p>Первым идёт оператор Nub (~.), который проходится по списку и выбирает в нём только уникальные значения.</p>
<p>9 9 9 3 1 1 0 становится 9 3 1 0</p>
<pre><code>#/.~</code></pre>
<p>Это предложение вернет нам 3 1 2 1</p>
<p>Что же происходит?</p>
<p>/. это глагол, диадная форма которого применяет стоящую перед ним команду для всей группы одинаковых ключей, стоящих под оператором. Например, глагол &lt; запаковывает данные в так называемою коробку. Посмотрите на этот скриншот, чтобы понять, как всё работает.</p>
<p><img src="img/box.png" /></p>
<p>Мы же применяем глагол #, который просто возвращает количество элементов.</p>
<p>Получается, мы группируем наш начальный массив в разные массивы, где каждый содержит одинаковые числа, и берём у каждой группы её размер.</p>
<p>Вау.</p>
<p>Как я узнал, что мы группируем сами с собой? Для этого служит тильда, она указывает в своем моноидном варианте, что мы будем применять глаголы к тому, что приходит к ним.</p>
<p>Глагол atop @ показывает нам, опять же, очередность, т.е. сначала со всем списком будут работать вторые скобки, а уже его результат используют первые.</p>
<p>Сначала мы делаем #/.~ c каждым элементом, а уже у полученного делаем =&gt;./ на весь список.</p>
<p>Перейдем ко второй скобке.</p>
<p>Тут слэш / говорит, что нам необходимо применить диаду. стоящую перед ним, ко всему списку. По сути, это обычный цикл (reduce), который идет по всему массиву и делает оператор с текущим и следующим значением до конца; в нашем случае это &gt;., который в других языках был бы просто знаком “больше”. Знак =, который сравнивает в нашем случае взятый массив и наибольшее значение, полученное с помощью прошлого глагола. Вся эта цепочка возвращает 1 0 0 0.</p>
<p>Мы дошли до такой формы.</p>
<pre><code>9 3 1 0 #~ 1 0 0 0</code></pre>
<p>Тильда в данном случае говорит поменять местами параметры. А # - копировать нужное количество раз заданное.</p>
<p>Самое главное - понять, что в этом языке есть вилки, поезда и крюки, и тогда идеи языка начинают раскрываться и становятся понятнее.</p>
<p>Главное отличие от остальных языков в том, что любые операторы, образующие программу, могут принимать либо один, либо два параметра. Из-за этого появляются такие операторы, как связывание (&amp;), которое просто привязывает данные к оператору, или [ и ], который берет данные с прошлого входа.</p>
<p>Как я понимаю, лучше всего этот язык изучать, играя с компилятором. В одной руке - словарь языка, в другой - идея чего мы хотим получить. Это всё напоминает старое хакерство, где за каждым поворотом ждет загадка.</p>
<p>Язык J интереснее учить именно разбирая чужие программы и заглядывая в справочники на сайте. Просто чтение примеров и текста не несёт и толики того удовольствия, если вы берете чужой код и смотрите как он работает, формулируя это сами.</p>
<p>Очередности и перестановки спрятаны в операторах языка, поэтому неподготовленный программист просто не сможет их считать. А очередность и место подстановки для этого языка - одно из важных вещей для написания правильных программ.</p>
<p>Надеюсь, вы, как и я, получите удовольствие от изучения этого языка.</p>
<h3 id="ссылки">Ссылки:</h3>
<ul>
<li><a href="http://www.jsoftware.com/help/dictionary/contents.htm">словарь языка J</a></li>
<li><a href="https://wycd.net/posts/2017-01-19-fizz-buzz-and-triangles-in-j.html">решение fizz bizz на J с объяснением</a></li>
<li><a href="https://www.hillelwayne.com/handwriting-j/">как еще можно разбирать программу на J</a></li>
</ul>
<!--@
lastpage = m"08"
nextpage = m"10"
time=m"25-10-2017"
htime=m"25 октября 2017"
og_title=m"Знакомство с J"
-->		</article>
		<p>
			<a href="10.html">Следующая статья</a>
		</p>
		<p>
			<a href="08.html">Предыдущая статья</a>
		</p>
	</main>
	<footer>
		<p>Любая перепечатка материалов возможна только с разрешения владельца сайта</p>
	</footer>
</body>

</html>
