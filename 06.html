<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8"></meta>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Блог Стебунова Владимира</title>
		<link rel="stylesheet" type="text/css" href="main.css">	
        <meta property="og:title" content="Диттеринг" />
		<meta property="og:image" content="http://vstebunov.me/img/og_image1.jpg" />
	</head>
	<body>
		<header>
            <h1><a href="/" class="h-card">Блог Стебунова Владимира</a></h1>
		</header>
		<main>
			<article>
				<time datetime=11-05-2017>11 мая 2017</time>
				<h1 id="ordered-dithering-порядковый-дизеринг">Ordered dithering (Порядковый дизеринг)</h1>
<p>В отличие от дизеринга Флойда-Стейнберга, порядковый дизеринг часто имитируется художниками пиксель-арта и есть в старых играх. Порядковый дизеринг обладает шаблоном и видом, который ни с чем не перепутаешь. Благодаря нему проще всего добиться эстетики старых компьютерных игр. Этот дизеринг лучше справляется с цветными изображениями, чем с черно-белыми.</p>
<p>Он тоже однопроходной и в отличие от Ф-С не требует знания о соседних пикселях. Достаточно знать координаты точки, и мы получим новый цвет. Перед тем как начать приводить картинку к наименьшей палитре, необходимо выбрать несколько параметров:</p>
<ul>
<li>Размер матрицы Байера - чем больше будет размер матрицы, тем больше нюансов цвета мы можем попробовать передать. (Размер следует выбирать равный или больший, чем пропорции исходных и конечных цветов. Для полноцветного изображения в 65535 цветов, переводимого в 2 цвета, будет пропорция 32767, а значит, матрица будет размера 151x217. Если мы хотим перевести полноцветное изображение в цвета ZX Spectrum, то получаем пропорцию 4369 и размер матрицы 17x257. Сам не проверял и верю <a href="http://en.wikipedia.com/Ordered_dithering">Википедии</a> в этом.)</li>
<li>Размер допуска - насколько цвета в конечной палитре отстоят друг от друга.</li>
</ul>
<p>Теперь мы “замостим” наше изображение матрицей Байера и будем брать цвет, равный сумме цвета исходного пикселя и элемента матрицы, помноженного на размер допуска. При сложении в RGB режиме пиксель становится светлее, при неправильно выбранном допуске можем получить засвеченную картинку. Либо на абсолютно чёрном фоне появятся серые пиксели при достаточно большой матрице и допуске. Матрица Байера (как я понимаю, это и есть фильтр Байера, используемый в фототехнике) попеременно ставит тёмные и светлые пиксели, делая чётные и нечётные квадраты близкими по цвету.</p>
<p>Пример матрицы для замащивания. Ячейки содержат цвет номера помноженный на допуск.</p>
<figure>
<img src="img/order_1.png" alt="Пример матрицы для замащивания. Ячейки содержат цвет номера помноженный на допуск." /><figcaption>Пример матрицы для замащивания. Ячейки содержат цвет номера помноженный на допуск.</figcaption>
</figure>
<p>При поиске конечных цветов одни будут подходить ближе к темной границе света, а другие к светлой. Таким образом образуется не всегда видимый глазу узор, который содержит до нескольких цветов, поэтому получается эмулировать больше цветов, чем даёт нам результирующее устройство - принтер или экран.</p>
<p>Алгоритм очень сильно зависит от начально выбранных параметров и при различных матрицах будет давать разные результаты. Поэтому отлаживать алгоритм сложно. Ниже картина Мойры Ханн, обработанная несколькими фильтрами.</p>
<ul>
<li>Исходник</li>
</ul>
<figure>
<img src="img/od_original.jpg" alt="Исходник" /><figcaption>Исходник</figcaption>
</figure>
<ul>
<li>Черно-белый с матрицей 2х2</li>
</ul>
<figure>
<img src="img/od_2x2.png" alt="Черно-белый с матрицей 2х2" /><figcaption>Черно-белый с матрицей 2х2</figcaption>
</figure>
<ul>
<li>Черно-белый с матрицей 8х8</li>
</ul>
<figure>
<img src="img/od_8x8.png" alt="Черно-белый с матрицей 8х8" /><figcaption>Черно-белый с матрицей 8х8</figcaption>
</figure>
<ul>
<li>Цвета ZX Spectrum и матрица 8x8</li>
</ul>
<figure>
<img src="img/od_zx.png" alt="Цвета ZX Spectrum и матрица 8x8" /><figcaption>Цвета ZX Spectrum и матрица 8x8</figcaption>
</figure>
<p>Кстати, о цветовой палитре Спектрума. Она не совсем обычна. На каждый пиксель выделено четыре бита. Первый бит отвечает за яркость, а остальные за цвет (красный, синий, зелёный), и благодаря такому сочетанию получается пятнадцать цветов. Почему пятнадцать? Черный присутствует и в яркой палитре, и в тёмной, а вот белый не в яркой палитре является серым.</p>
<h3 id="ссылки">Ссылки:</h3>
<ul>
<li><a href="https://www.cg.tuwien.ac.at/courses/CG2/SS2002/RasterGraphics_slides.pdf">Презентация о диттеренге</a></li>
<li><a href="http://www.moirahahn.com/paintings/06-07/index.html">Сайт Мойры Ханн</a></li>
</ul>
			</article>
			<p>
                <a href="07.html">Следующая статья</a>
			</p>
			<p>
                <a href="05.html">Предыдущая статья</a>
			</p>
		</main>
		<hr/>
		<footer>
			<p>Любая перепечатка материалов возможна только с разрешения владельца сайта</p>
		</footer>
	</body>
</html>
