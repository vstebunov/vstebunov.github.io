<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	</meta>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Блог Стебунова Владимира</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
		<meta property="og:title" content="Штриховка тени" />	</head>

<body>
	<header>
		<h1><a href="/">Блог Стебунова Владимира</a></h1>
	</header>
	<main>
		<article>
			<time datetime=14-11-2017>14 ноября 2017</time>
			<h1 id="штриховка-тени">Штриховка тени</h1>
<p>Для того, чтобы выводить трехмерные объекты с штрихованной тенью,
нужно разобраться в двух вещах: <a
href="http://www.opengl-tutorial.org/ru/intermediate-tutorials/tutorial-16-shadow-mapping/">как
выводить тень на поверхность</a> и <a
href="http://www.yaldex.com/open-gl/ch17lev1sec4.html">как делать
штриховку</a>.</p>
<p>Для вывода тени мы:</p>
<ul>
<li>Строим изображение с того места, где находится источник света.</li>
<li>Затемняем те участки, которые не видны оттуда - на них падает
тень.</li>
<li>Накладываем его, как текстуру, на наши объекты.</li>
<li>Выводим с точки зрения зрителя.</li>
</ul>
<p>После чего мы перемножаем тень на штриховку.</p>
<p>Получается следующий шейдер.</p>
<pre><code>    gl_FragColor = vec4(vertColor.rgb * max(visibility * 0.05556, square), vertColor.a);</code></pre>
<ul>
<li>square - градиент с пиками</li>
<li>visibility - кол-во тени на объекте</li>
</ul>
<p>Вот как это выглядит.</p>
<figure>
<img src="img/simple_shadow.png" alt="first" />
<figcaption aria-hidden="true">first</figcaption>
</figure>
<p>Как видим, возникает муар. Наклон полос зависит от положения
источника света. Толщина полос никак не регулируется. Эти задачи оставим
на будущее.</p>
<figure>
<img src="img/tetris-result.gif" alt="tetris" />
<figcaption aria-hidden="true">tetris</figcaption>
</figure>
<figure>
<img src="img/testris1.png" alt="testris1" />
<figcaption aria-hidden="true">testris1</figcaption>
</figure>
<figure>
<img src="img/testris2.png" alt="testris2" />
<figcaption aria-hidden="true">testris2</figcaption>
</figure>
<figure>
<img src="img/testris3.png" alt="testris3" />
<figcaption aria-hidden="true">testris3</figcaption>
</figure>
<h2 id="ссылки">Ссылки:</h2>
<ul>
<li><a
href="http://www.opengl-tutorial.org/ru/intermediate-tutorials/tutorial-16-shadow-mapping/">Как
создается тень и какие баги при этом возникают</a></li>
<li><a
href="https://forum.processing.org/two/discussion/12775/simple-shadow-mapping#latest">Реализация
этого в Processing</a></li>
<li><a href="http://www.yaldex.com/open-gl/ch17lev1sec4.html">Простая
реализация полосок</a></li>
</ul>		</article>
		<p>
			<a href="11.html">Следующая статья</a>
		</p>
		<p>
			<a href="09.html">Предыдущая статья</a>
		</p>
	</main>
	<footer>
		<p>Любая перепечатка материалов возможна только с разрешения владельца сайта</p>
        <p><a href="https://buymeacoffee.com/vstebunov">Купить кофе автору</a></p>
	</footer>
</body>

</html>
